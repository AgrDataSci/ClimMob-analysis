---
output:
  pdf_document: default
  word_document:
    reference_docx: participant_report.docx
  html_document:
    df_print: paged
---
```{r setup_opts, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, error=FALSE, message=FALSE, warning = FALSE)
```

```{r}
partic_reports <- ""
for(i in seq_along(participant_report$partitable$id)){
  # ranker description
  id_i <- participant_report$partitable$id[i]
  name <- participant_report$partitable$name[i]
  name <- paste0("**", name,  "**")
  thanks <- participant_report$reporttext[match("thanks", participant_report$reporttext[,1]), 2]
  thanks <- gsub("r name", name, thanks)
  your_items <- sort(as.vector(unlist(participant_report$partitable[i, c(3:5)])))
  your_ranking <- as.vector(unlist(participant_report$partitable[i, paste0("Position", 1:3)]))
  yourpackage <- as.vector(unlist(participant_report$partitable[i, c(3:5)]))
  yourpackage <- paste(paste(yourpackage, paste0("(", LETTERS[1:3], ")")), collapse = ", ")
  
  reporttext_i <- gsub("r yourpackage", yourpackage, participant_report$reporttext[3,2])
  
  # prepare the outputs for each participant
  podium_i <-
  participant_report$ggpodium +
    geom_text(position = position_dodge(width=0.9), 
             aes(x = label, y = values, 
                 label = your_ranking[c(2, 1, 3)]), 
             vjust= -0.5)
  
  
  partic_reports <- c(partic_reports,
                      knitr::knit_child(paste0(fullpath, "/report/participant_report.Rmd"), 
                                        quiet=TRUE))
  
}
```

```{r, echo=FALSE, results="asis", message=FALSE, warning=FALSE}
cat(paste(partic_reports, collapse = '\n'))
```

